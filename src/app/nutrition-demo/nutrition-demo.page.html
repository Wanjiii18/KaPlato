<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Nutrition System Demo</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Demo Selection -->
  <ion-segment [(ngModel)]="selectedDemo" class="demo-selector">
    <ion-segment-button *ngFor="let option of demoOptions" [value]="option.value">
      <ion-label>{{ option.label }}</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Search Demo -->
  <div *ngIf="selectedDemo === 'search'" class="demo-section">
    <ion-card>
      <ion-card-header>
        <ion-card-title>üçΩÔ∏è Filipino Nutrition Database</ion-card-title>
        <ion-card-subtitle>Comprehensive nutrition data for Filipino dishes</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>Our enhanced nutrition service includes detailed information for {{ filipinoDishes.length }} popular Filipino dishes.</p>
        
        <!-- Quick Search Options -->
        <div class="quick-actions">
          <ion-button (click)="searchHealthyOptions()" fill="outline" color="success">
            <ion-icon name="leaf" slot="start"></ion-icon>
            Healthy Options (&lt;300 cal)
          </ion-button>
          
          <ion-button (click)="searchVegetarianOptions()" fill="outline" color="secondary">
            <ion-icon name="restaurant" slot="start"></ion-icon>
            Vegetarian Dishes
          </ion-button>
        </div>

        <!-- Sample Dish Buttons -->
        <div class="sample-dishes">
          <h4>Try these popular dishes:</h4>
          <ion-chip 
            *ngFor="let dish of filipinoDishes.slice(0, 8)" 
            (click)="searchDishByName(dish)"
            color="primary"
            outline>
            <ion-label>{{ dish | titlecase }}</ion-label>
          </ion-chip>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Sample Nutrition Display -->
    <ion-card *ngIf="sampleNutrition">
      <ion-card-header>
        <ion-card-title>{{ sampleNutrition.name | titlecase }}</ion-card-title>
        <ion-card-subtitle>Nutrition Facts</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="6" size-md="3">
              <div class="nutrition-stat">
                <ion-badge [color]="getCalorieColor(sampleNutrition.nutrition.calories)" size="large">
                  {{ sampleNutrition.nutrition.calories }}
                </ion-badge>
                <small>Calories</small>
              </div>
            </ion-col>
            <ion-col size="6" size-md="3">
              <div class="nutrition-stat">
                <ion-badge color="success" size="large">
                  {{ sampleNutrition.nutrition.protein }}g
                </ion-badge>
                <small>Protein</small>
              </div>
            </ion-col>
            <ion-col size="6" size-md="3">
              <div class="nutrition-stat">
                <ion-badge color="primary" size="large">
                  {{ sampleNutrition.nutrition.carbs }}g
                </ion-badge>
                <small>Carbs</small>
              </div>
            </ion-col>
            <ion-col size="6" size-md="3">
              <div class="nutrition-stat">
                <ion-badge color="warning" size="large">
                  {{ sampleNutrition.nutrition.fat }}g
                </ion-badge>
                <small>Fat</small>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>

        <!-- Additional Info -->
        <div class="additional-info">
          <div *ngIf="sampleNutrition.allergens.length > 0" class="allergens">
            <strong>Allergens:</strong>
            <ion-chip *ngFor="let allergen of sampleNutrition.allergens" color="danger" outline>
              <ion-icon name="warning" slot="start"></ion-icon>
              <ion-label>{{ allergen | titlecase }}</ion-label>
            </ion-chip>
          </div>

          <div class="spice-level">
            <ion-chip [color]="sampleNutrition.spiceLevel === 'mild' ? 'success' : 'warning'">
              <ion-icon [name]="getSpiceLevelIcon(sampleNutrition.spiceLevel)" slot="start"></ion-icon>
              <ion-label>{{ sampleNutrition.spiceLevel | titlecase }}</ion-label>
            </ion-chip>
          </div>

          <div *ngIf="sampleNutrition.dietaryTags.length > 0" class="dietary-tags">
            <ion-chip *ngFor="let tag of sampleNutrition.dietaryTags" color="success" outline>
              <ion-icon name="checkmark-circle" slot="start"></ion-icon>
              <ion-label>{{ tag | titlecase }}</ion-label>
            </ion-chip>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Search Results -->
    <div *ngIf="searchResults.length > 0" class="search-results">
      <h3>Search Results</h3>
      <ion-card *ngFor="let result of searchResults">
        <ion-card-header>
          <ion-card-title>{{ result.name | titlecase }}</ion-card-title>
          <ion-card-subtitle>{{ result.servingSize }}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <ion-grid>
            <ion-row>
              <ion-col size="3">
                <div class="nutrition-stat">
                  <ion-badge [color]="getCalorieColor(result.nutrition.calories)">
                    {{ result.nutrition.calories }}
                  </ion-badge>
                  <small>Calories</small>
                </div>
              </ion-col>
              <ion-col size="3">
                <div class="nutrition-stat">
                  <ion-badge color="success">
                    {{ result.nutrition.protein }}g
                  </ion-badge>
                  <small>Protein</small>
                </div>
              </ion-col>
              <ion-col size="3">
                <div class="nutrition-stat">
                  <ion-badge color="primary">
                    {{ result.nutrition.carbs }}g
                  </ion-badge>
                  <small>Carbs</small>
                </div>
              </ion-col>
              <ion-col size="3">
                <div class="nutrition-stat">
                  <ion-badge color="warning">
                    {{ result.nutrition.fat }}g
                  </ion-badge>
                  <small>Fat</small>
                </div>
              </ion-col>
            </ion-row>
          </ion-grid>

          <!-- Spice Level and Dietary Info -->
          <div class="tags-section">
            <ion-chip [color]="result.spiceLevel === 'mild' ? 'success' : 'warning'" size="small">
              <ion-icon [name]="getSpiceLevelIcon(result.spiceLevel)" slot="start"></ion-icon>
              <ion-label>{{ result.spiceLevel | titlecase }}</ion-label>
            </ion-chip>

            <ion-chip 
              *ngFor="let tag of result.dietaryTags" 
              color="success" 
              outline 
              size="small">
              <ion-label>{{ tag | titlecase }}</ion-label>
            </ion-chip>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="loading-section">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Loading nutrition data...</p>
    </div>
  </div>

  <!-- Nutrition Manager Demo -->
  <div *ngIf="selectedDemo === 'manager'">
    <app-nutrition-manager></app-nutrition-manager>
  </div>

  <!-- API Integration Demo -->
  <div *ngIf="selectedDemo === 'api'" class="demo-section">
    <ion-card>
      <ion-card-header>
        <ion-card-title>üîå API Integration</ion-card-title>
        <ion-card-subtitle>Spoonacular + Enhanced Nutrition Service</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <h4>Multi-Layered Nutrition System</h4>
        <p>Our nutrition system combines multiple data sources for comprehensive coverage:</p>
        
        <div class="api-layers">
          <div class="api-layer">
            <ion-chip color="primary">
              <ion-icon name="globe" slot="start"></ion-icon>
              <ion-label>Spoonacular API</ion-label>
            </ion-chip>
            <p>International recipes and detailed nutrition analysis</p>
          </div>

          <div class="api-layer">
            <ion-chip color="success">
              <ion-icon name="location" slot="start"></ion-icon>
              <ion-label>Filipino Food Database</ion-label>
            </ion-chip>
            <p>Local dishes with culturally accurate nutrition data</p>
          </div>

          <div class="api-layer">
            <ion-chip color="warning">
              <ion-icon name="calculator" slot="start"></ion-icon>
              <ion-label>Smart Estimation</ion-label>
            </ion-chip>
            <p>AI-powered nutrition estimation for unknown dishes</p>
          </div>
        </div>

        <h4>Features</h4>
        <ion-list>
          <ion-item>
            <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
            <ion-label>Comprehensive calorie counting</ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
            <ion-label>Allergen detection and warnings</ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
            <ion-label>Dietary preference filtering</ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
            <ion-label>Spice level classification</ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
            <ion-label>Personalized recommendations</ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
