<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Ingredient Search</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Ingredient Search</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Search Section -->
  <div class="search-section">
    <ion-searchbar 
      [(ngModel)]="searchQuery"
      placeholder="Search for ingredients..."
      (ionInput)="searchIngredients()"
      debounce="500"
      show-clear-button="focus">
    </ion-searchbar>

    <ion-button 
      expand="block" 
      (click)="searchIngredients()"
      [disabled]="!searchQuery.trim() || isLoading"
      class="search-button">
      <ion-icon name="search" slot="start"></ion-icon>
      {{ isLoading ? 'Searching...' : 'Search Ingredients' }}
    </ion-button>

    <ion-button 
      fill="clear" 
      (click)="clearSearch()"
      [disabled]="!hasSearched"
      class="clear-button">
      <ion-icon name="refresh" slot="start"></ion-icon>
      Clear Results
    </ion-button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-section">
    <ion-spinner name="circular"></ion-spinner>
    <p>Searching ingredients...</p>
  </div>

  <!-- Results Section -->
  <div *ngIf="hasSearched && !isLoading" class="results-section">
    <ion-text *ngIf="ingredients.length === 0" class="no-results">
      <h3>No ingredients found</h3>
      <p>Try searching for a different ingredient name.</p>
    </ion-text>

    <ion-grid *ngIf="ingredients.length > 0">
      <ion-row>
        <ion-col size="12" class="results-header">
          <h3>Found {{ ingredients.length }} ingredients</h3>
        </ion-col>
      </ion-row>
      
      <ion-row>
        <ion-col 
          size="6" 
          size-md="4" 
          size-lg="3" 
          *ngFor="let ingredient of ingredients; trackBy: trackByIngredientId"
          class="ingredient-col">
          
          <ion-card class="ingredient-card">
            <div class="ingredient-image-container">
              <img 
                [src]="getIngredientImageUrl(ingredient)" 
                [alt]="ingredient.name"
                class="ingredient-image"
                (error)="onImageError($event)">
            </div>
            
            <ion-card-content>
              <ion-card-title class="ingredient-name">
                {{ ingredient.name }}
              </ion-card-title>
              
              <ion-card-subtitle *ngIf="ingredient.aisle" class="ingredient-aisle">
                {{ ingredient.aisle }}
              </ion-card-subtitle>
              
              <div class="ingredient-details">
                <ion-chip *ngIf="ingredient.consistency" color="secondary">
                  {{ ingredient.consistency }}
                </ion-chip>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <!-- Welcome Message -->
  <div *ngIf="!hasSearched && !isLoading" class="welcome-section">
    <ion-icon name="search" class="welcome-icon"></ion-icon>
    <h2>Welcome to Ingredient Search</h2>
    <p>Search for ingredients using the Spoonacular API. Enter an ingredient name above to get started!</p>
    
    <div class="suggestion-chips">
      <h4>Try searching for:</h4>
      <ion-chip 
        *ngFor="let suggestion of ['chicken', 'tomato', 'onion', 'garlic', 'rice', 'cheese']"
        (click)="searchQuery = suggestion; searchIngredients()"
        class="suggestion-chip">
        {{ suggestion }}
      </ion-chip>
    </div>
  </div>
</ion-content>
