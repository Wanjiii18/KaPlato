<ion-header [translucent]="true" class="modern-meal-header">
  <ion-toolbar class="gradient-meal-toolbar">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" color="light" class="modern-back-btn"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <div class="modern-meal-title">
        <ion-icon name="calendar" color="light"></ion-icon>
        <span>Meal Planner</span>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="modern-meal-content">
  <div class="modern-meal-container animate-fade-in">
    <div class="welcome-section animate-slide-up">
      <h1>Plan Your Perfect Day üçΩÔ∏è</h1>
      <p>Create a balanced meal plan with delicious Filipino cuisine</p>
    </div>
    
    <ion-card class="modern-meal-planner-card animate-slide-up">
      <div class="modern-card-header">
        <div class="header-content">
          <h2>Today's Meal Plan</h2>
          <p>Choose your breakfast, lunch, and dinner</p>
        </div>
        <div class="header-decoration">
          <ion-icon name="restaurant-outline"></ion-icon>
        </div>
      </div>
      
      <ion-card-content class="modern-card-content">
        <form (ngSubmit)="saveMealPlan()" #mealForm="ngForm">
          <div class="modern-meal-item breakfast-item">
            <div class="meal-icon-container breakfast-icon">
              <ion-icon name="sunny" color="light"></ion-icon>
            </div>
            <div class="meal-content">
              <ion-label class="meal-label">Breakfast</ion-label>
              <ion-select 
                [(ngModel)]="mealPlan.breakfast" 
                name="breakfast" 
                required 
                placeholder="Select your breakfast"
                interface="popover"
                class="modern-select">
                <ion-select-option *ngFor="let meal of mealOptions" [value]="meal">
                  {{ meal }}
                </ion-select-option>
              </ion-select>
            </div>
          </div>

          <div class="modern-meal-item lunch-item">
            <div class="meal-icon-container lunch-icon">
              <ion-icon name="restaurant" color="light"></ion-icon>
            </div>
            <div class="meal-content">
              <ion-label class="meal-label">Lunch</ion-label>
              <ion-select 
                [(ngModel)]="mealPlan.lunch" 
                name="lunch" 
                required 
                placeholder="Select your lunch"
                interface="popover"
                class="modern-select">
                <ion-select-option *ngFor="let meal of mealOptions" [value]="meal">
                  {{ meal }}
                </ion-select-option>
              </ion-select>
            </div>
          </div>

          <div class="modern-meal-item dinner-item">
            <div class="meal-icon-container dinner-icon">
              <ion-icon name="moon" color="light"></ion-icon>
            </div>
            <div class="meal-content">
              <ion-label class="meal-label">Dinner</ion-label>
              <ion-select 
                [(ngModel)]="mealPlan.dinner" 
                name="dinner" 
                required 
                placeholder="Select your dinner"
                interface="popover"
                class="modern-select">
                <ion-select-option *ngFor="let meal of mealOptions" [value]="meal">
                  {{ meal }}
                </ion-select-option>
              </ion-select>
            </div>
          </div>

          <div class="modern-button-container">
            <ion-button 
              expand="block" 
              type="submit" 
              color="primary" 
              [disabled]="!mealForm.form.valid || isSubmitting"
              class="modern-save-button">
              <ion-icon name="checkmark-circle" slot="start"></ion-icon>
              {{ isSubmitting ? 'Saving...' : 'Save Meal Plan' }}
            </ion-button>
          </div>
        </form>
      </ion-card-content>
    </ion-card>

    <!-- Modern Loading state -->
    <div *ngIf="mealOptions.length === 0" class="modern-loading-card animate-fade-in">
      <div class="loading-content">
        <ion-spinner name="crescent" color="primary"></ion-spinner>
        <h3>Loading meal options...</h3>
        <p>Finding the best Filipino dishes for you</p>
      </div>
    </div>
  </div>
</ion-content>
